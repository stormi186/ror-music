<tr>
  <td><%= link_to track.name, track_path(track) %></td>
  <td><%= track.duration %></td>
  <td><%= track.genre.name %></td>
  <td><%= link_to track.artist.name, artist_path(track.artist) %></td>
  <td><%= link_to track.album.name, album_path(track.album) %></td>
  <td><%= track.album.year %></td>
  <td>
  <div class="btn-group">
<% unless current_user.favorite_tracks.exists?(id: track.id) %>
<%= link_to favorite_tracks_path(track_id: track), method: :post, class: 'btn btn-sm btn-primary' do %>
<i class="glyphicon glyphicon-heart-empty"></i>&nbsp;
<% end %>
<% else %>
<%= link_to favorite_track_path(track), method: :delete, class: 'btn btn-sm btn-primary' do %>
<i class="glyphicon glyphicon-heart"></i>&nbsp;
<% end %>
<% end %>
<%= link_to track.youtubelink, class: 'btn btn-sm btn-primary', target: :_blank do %>
<i class="glyphicon glyphicon-play"></i>&nbsp;
<% end %>

<a data-toggle="modal" data-target="#addTrackDialog" data-id="<%=track.id %>" title="Add this item" class="open-AddTrackDialog btn btn-sm btn-primary" href="#addTrackDialog">test</a>

<div class="modal fade" id="addTrackDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
 <div class="modal-header">
    <button class="close" data-dismiss="modal">Ã—</button>
    <h3>Add to playlist</h3>
  </div>
    <div class="modal-body">
    <% if current_user.playlists.exists? %>
			<%= form_for PlaylistTrack.new, remote: true, url: track_playlists_path, method: :post, id: 'myForm' do |form| %>
  		<input id="trackId" name="trackId" type="hidden" />
  	<%= form.collection_select :playlist_id, Playlist.where(user_id: current_user.id), :id, :name, { prompt: 'Choose Playlist' }, class: 'form-control' %>
  	<br>
  	<%= form.submit 'Save', method: :post, class: 'btn btn-block btn-primary' %>
  	<% end %>
  	<% else %>
  	<%= link_to "Create playlist", new_playlist_path %>
  	<% end %>
    </div>
</div>
</div>